# The yml build definition is the "roadmap" for a build, that tells DrupalCI what steps to execute, in what order, and
# Provides a way to "lock" configuration values.
# The structure of a build.yml will always follow the following conventions:
# There are five levels:
# 1. The build
# 2. build stages and build level configuration.
# 3. jobs and build stage configuration
# 4. build tasks and job configuration
# 5. Build task Configuration.


# The keys at each level are one of two possibilities: either the plugin name for a buildstage/job/buildtask,
# *or* they are a configuration override that will take precedence over all other configuration directives.
# The default build. yml file may contain keys who's default configuration is a no-op.
# this is to allow for those configurations to be overridden, such as composer, and patches.

# The build level really only exists to provide for a possibility to run entire, multiple builds. It might go away.
build:
  environment:
    startcontainers:
      runcontainers:
    create_db:
      dbcreate:
        randomstring: 20
    dbversion: mysql-5.5
  codebase:
    assemble_codebase:
      checkout:
      composer:
        arbitrary_configuration:
          - item 1
          - item 2
          - item 3
      # The default configuration for the patch plugin is to do nothing. But if we do not define it, it wont run at all
      # This allows us to optionally enable it with env variables, user config overrides, or command line overrides.
      # This is an example of a plugin that is configured multiple times.
      patch:
      - from: http://drupal.org/files/123457.patch
        to: .
      - from: http://drupal.org/files/123457.patch
        to: .
      fetch:
    validate_codebase:
      phplint:
      #this is an example of doing the whole assessment stage twice
  assessment:
    - testing:
        simpletest:
          - concurrency: 32
          - concurrency: 40
      metrics:
    - testing:
        simpletest:
      metrics:
  buildid: foobar




